<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>WMS from ferret variable</title>

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-rc.3/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-rc.3/leaflet.js"></script>

    <style type="text/css">
        html, body { width: 100%; height: 100%; font-family: "arial" }
        #map1 { float: left; width: 600px; height: 400px; margin: 100px;}
        pre { margin-left: 50px;}
	.leaflet-tile { transform: scale(1.2); }
    </style>
</head>

<body>

    <h3>Web Map Service (WMS) from pyferret</h3>
    <p>This page will load tiles produced by workers from a gunicorn server (a python WSGI server)
       that you will have previously launched with the following command:
    <pre>gunicorn -w 4 myapp_request_pyferret_01:app</pre>
    </p>
    <div id="map1"></div>

    <p>More informations:
	<ul>
	<li><a href="http://ferret.pmel.noaa.gov/Ferret/documentation/pyferret" target="_blank">pyferret</a>
	<li><a href="http://leafletjs.com/examples/wms/wms.html" target="_blank">WMS in Leaflet</a>
	<li><a href="http://gunicorn.org/" target="_blank">gunicorn: a Python WSGI HTTP Server</a>
	<li><a href="http://www.opengeospatial.org/standards/wms" target="_blank">OpenGISÂ® Web Map Service Interface Standard (WMS)</a>
	</ul>
    </p>


    <script type="text/javascript">

    //===============================================
    var crs = L.CRS.EPSG4326;
    //var crs = L.CRS.EPSG3857;

    //===============================================
    // Only in EPSG:4326
    var wmspyferret = L.tileLayer.wms("http://localhost:8000", {
    	variable: 'temp[k=@max]',
    	cmd: 'shade/lev=(-inf)(-10,30,1)(inf)/pal=mpl_PSU_plasma',
        crs: crs,
    	format: 'image/png',
    	transparent: true,
    	attribution: 'pyferret',
	uppercase: true
    });

    //===============================================
    // Following services are available in EPSG:4326 
    //var layer = L.tileLayer('http://server.arcgisonline.com/ArcGis/rest/services/ESRI_StreetMap_World_2D/MapServer/tile/{z}/{y}/{x}');
    //var layer = L.tileLayer('http://server.arcgisonline.com/ArcGis/rest/services/ESRI_Imagery_World_2D/MapServer/tile/{z}/{y}/{x}');

    // Following services are available in EPSG:3857
    //var layer = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}');

    //===============================================
    // Following service is available in EPSG:3857 and EPSG:4326
    var frontiers = L.tileLayer.wms("http://www.globalcarbonatlas.org:8080/geoserver/GCA/wms", {
    	layers: 'GCA:GCA_frontiersCountryAndRegions',
    	format: 'image/png',
        crs: crs,
    	transparent: true
    });

    //===============================================
    var map1 = L.map('map1', {
        //layers: [layer, wmspyferret],
        layers: [wmspyferret, frontiers],
        crs: crs,
        center: [0, 0],
        zoom: 2 
    });

    </script>
</body>
</html>
